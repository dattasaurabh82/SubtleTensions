- name: Setup and Update Raspberry Pi for Bootable Serial Monitor
  hosts: raspberry_pi3_A_PLUS
  become: 'yes'
  vars:
    motd_content: |
      ______ _____ _____ _____ _____ __       _____ _____ _____ 
      |   __|   __| __  |     |  _  |  |     |     |     |   | |
      |__   |   __|    -|-   -|     |  |__   | | | |  |  | | | |
      |_____|_____|__|__|_____|__|__|_____|  |_|_|_|_____|_|___|
                                                          
      Welcome to Serial Monitor
      By: Saurabh Datta
      2024-2025                                             

  tasks:
    - name: Update apt cache (equivalent to apt-get update -y)
      apt:
        update_cache: 'yes'
        force_apt_get: 'yes'
    
    - name: Hide Raspberry Pi logo during boot and disable logo on top left corner
      lineinfile:
        path: /boot/firmware/cmdline.txt
        regexp: '^(.*)$'
        line: '\1 logo.nologo console_logo.enabled=0'
        backrefs: yes
        
    - name: Set custom MOTD
      copy:
        content: "{{ motd_content }}"
        dest: /etc/motd
        owner: root
        group: root
        mode: '0644'

    - name: Install required packages
      apt:
        name:
          - git
          - tmux
          - neofetch
          - vim
          - uhubctl
        state: present
        force_apt_get: 'yes'

    - name: Display installation complete message
      debug:
        msg: >-
          System Configuration and Installation complete! 